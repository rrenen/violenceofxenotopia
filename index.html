<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>V.O.X</title>

<style>
@font-face {
  font-family: 'EurostileNextExtBold';
  src: url('fonts/eurostile-bold-extended.otf') format('opentype');
  font-display: swap;
}

:root {
  --font-sans: 'EurostileNextExtBold', sans-serif;
}

body {
  font-family: var(--font-sans);
  margin: 40px auto;
  max-width: 800px;
}

h1 {
  border-bottom: 2px solid #ccc;
}

ul { list-style: none; padding: 0; }

li {
  background: #f9f9f9;
  margin: 8px 0;
  padding: 10px;
  border-radius: 8px;
}

a {
  text-decoration: none;
  font-weight: bold;
  color: #0044cc;
}

button {
  margin-top: 8px;
}
</style>
</head>

<body>

<h1>V.O.X</h1>
<p>Violence of Xenotopia</p>

<div id="menu">
  <button id="loginBtn">ðŸ”“ Login</button>
  <button id="logoutBtn" style="display:none;">ðŸ”’ Logout</button>

  <div id="createSection" style="display:none;">
    <input id="newPageTitle" placeholder="New page title">
    <button onclick="createPage()">ï¼‹ Create Page</button>
  </div>
</div>

<ul id="pageList"></ul>

<script>
const EDIT_PASSWORD = "gooniesinshimokita";

let isEditMode = localStorage.getItem("wikiEditMode") === "on";
let pages = JSON.parse(localStorage.getItem("wikiPages") || "[]");

const list = document.getElementById("pageList");
const createSection = document.getElementById("createSection");
const loginBtn = document.getElementById("loginBtn");
const logoutBtn = document.getElementById("logoutBtn");

function renderList() {
  list.innerHTML = "";
  pages.forEach(p => {
    const li = document.createElement("li");
    const a = document.createElement("a");
    a.textContent = p.title;
    a.href = "page.html?page=" + encodeURIComponent(p.title);
    li.appendChild(a);
    list.appendChild(li);
  });
}

function createPage() {
  if (!isEditMode) return alert("Edit mode required");
  const title = newPageTitle.value.trim();
  if (!title) return;
  if (pages.some(p => p.title === title)) {
    return alert("Page already exists");
  }

  pages.unshift({ title });
  localStorage.setItem("wikiPages", JSON.stringify(pages));
  renderList();
  newPageTitle.value = "";
}

function enterEditMode() {
  const pw = prompt("Password:");
  if (pw === EDIT_PASSWORD) {
    localStorage.setItem("wikiEditMode", "on");
    isEditMode = true;
    updateUI();
  }
}

function logout() {
  localStorage.removeItem("wikiEditMode");
  isEditMode = false;
  updateUI();
}

function updateUI() {
  createSection.style.display = isEditMode ? "block" : "none";
  loginBtn.style.display = isEditMode ? "none" : "inline-block";
  logoutBtn.style.display = isEditMode ? "inline-block" : "none";
}

loginBtn.onclick = enterEditMode;
logoutBtn.onclick = logout;

renderList();
updateUI();
</script>

</body>
</html>
